<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- Add JsPsych -->
    <script src="https://unpkg.com/jspsych@7.3.2"></script>
    <!-- Keybord response plugin -->
    <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@1.1.2"></script>
    <!-- Image Keybord response plugin -->
    <script src="https://unpkg.com/@jspsych/plugin-image-keyboard-response@1.1.2"></script>
    <!-- Preload plugin to preload images -->
    <script src="https://unpkg.com/@jspsych/plugin-preload@1.1.2"></script>
    <!-- Button Response Plugin -->
    <script src="https://unpkg.com/@jspsych/plugin-html-button-response@1.1.2"></script>
     <!-- Image button response plugin -->
     <script src="https://unpkg.com/@jspsych/plugin-image-button-response@1.1.2"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-multi-choice@1.1.2"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-multi-select@1.1.2"></script>

    <!-- Style from JsPsych -->
    <link href="https://unpkg.com/jspsych@7.3.2/css/jspsych.css" rel="stylesheet" type="text/css" />
    <link href="local.css" rel="stylesheet"/>
</head>
<body>
    <!-- JsPsych script -->
    <script>
       // Note that participant's response 0 corresponds to Yes and 1 corresponds to No. 
        // Bootstrap
        document.querySelector('head').insertAdjacentHTML("beforeend",'<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">')
        document.querySelector('head').insertAdjacentHTML("beforeend",'<link rel="stylesheet" href="https://www.tklochowicz.com/assets/causal_css.css" type="text/css">')
        // Initialise and make data display at the end.
        var jsPsych = initJsPsych({
            on_finish: function(){
                jsPsych.data.displayData();
                // window.location = "https://app.prolific.co/"
            }
            });

        // The timeline is an array that contains the set of trials we want to run in the experiment.
        var timeline = [];
        // Prelod all images before the experiment begins to avoid waiting time later. 
        var preload = {
            type: jsPsychPreload,
            images: ['img/cut_dd.png', 'img/cut_dm.png', 'img/cut_du.png', 'img/cut_md.png', 'img/cut_mm.png', 'img/cut_mu.png', 'img/cut_ud.png', 'img/cut_um.png', 'img/cut_uu.png', 'img/c_a_b_im.png', 'img/c_a_b_q.png', 'img/c_a_s_im.png', 'img/c_a_s_q.png', 'img/c_bch_cut.png', 'img/c_bs_cut.png', 'img/c_b_b_im.png', 'img/c_b_b_q.png', 'img/c_b_ch_im.png', 'img/c_b_ch_q.png', 'img/c_b_m_im.png', 'img/c_b_m_q.png', 'img/c_b_s_im.png', 'img/c_b_s_q.png', 'img/c_chs_cut.png', 'img/c_ch_s_im.png', 'img/c_sb_cut.png', 'img/c_sm_cut.png', 'img/c_ss_cut.png', 'img/c_t1_q.png', 'img/c_t2_im.png', 'img/c_t2_q.png', 'img/c_t3_im.png', 'img/c_t3_q.png', 'img/c_t4_im.png', 'img/c_t4_q.png', 'img/c_test_im.png', 'img/c_test_q.png', 'img/c_tq_im.png', 'img/dd_q.png', 'img/dm_l.png', 'img/dm_q.png', 'img/du_l.png', 'img/du_q.png', 'img/md_l.png', 'img/md_q.png', 'img/mm_l.png', 'img/mm_q.png', 'img/mu_l.png', 'img/mu_q.png', 'img/n_1212_cut.png', 'img/n_1223_cut.png', 'img/n_1242_cut.png', 'img/n_1314_cut.png', 'img/n_2233_cut.png', 'img/n_4231_cut.png', 'img/n_t1_im.png', 'img/n_t1_q.png', 'img/n_t2_im.png', 'img/n_t2_q.png', 'img/n_t3_im.png', 'img/n_t3_q.png', 'img/n_t4_im.png', 'img/n_t4_q.png', 'img/n_test_im.png', 'img/n_test_q.png', 'img/ud_l.png', 'img/ud_q.png', 'img/um_l.png', 'img/um_q.png', 'img/uu_l.png', 'img/uu_q.png',] };
            timeline.push(preload);


        var welcome = {
            type: jsPsychHtmlButtonResponse,
            stimulus: ' <p style="margin-top:2%;"><b>Welcome!</b></p><p style="font-size:100%;margin-left:10%;margin-right:10%;">We are Dean McHugh and Tomasz Klochowicz from the University of Amsterdam. At the beginning, we would like to thank you for your participation in this study. It should take you no more than 15 minutes to answer all the questions. </p> <p style="font-size:100%;margin-left:10%;margin-right:10%;">The questions do not have "right" or "wrong" answers. Some of the questions may seem similar, but please answer all of them. The survey does not aim to test your general knowledge. Some of the questions may refer to real people or events, but the stories in the questions are completely made up for the sole purpose of this survey. If a story seems false or implausible to you, try to imagine the situation described by the story. If you have any questions, you can contact us by e-mail at: t.j.klochowicz@uva.nl.</p>',
            choices: ['OK'],
            button_html: '<button class="jspsych-btn" style="margin-bottom:40px;">%choice%</button>',
            };
        // Push the welcome trial to the timeline
        timeline.push(welcome);

        var consent = {
            type: jsPsychHtmlButtonResponse,
            stimulus: ` 
                <div class='row'> 
                    <div class = 'col consent'>
                        <h2 style='text-align:center;margin-bottom:2%'>Informed Consent</h2>
                        <hr>
                        <p>By clicking the button 'Accept and continue' below you declare that:</p>

                        <p>You have been clearly informed about the research: NihiL - the neglect-zero effect in modal and nominal domains, research project conducted by Dean McHugh and Tomasz Klochowicz reaserchs at the University of Amsterdam, Institute for Logic Language and Computation, as described in the information brochure displayed at prolific.co. You declare that your questions have been answered to your satisfaction.</p>

                        <p>You realise that participation in this research is on an entirely voluntary basis. You retain the right to revoke this consent without having to provide any reasons for my decision. You are aware that you are entitled to discontinue the research at any time, and that you can always withdraw your consent after the research has ended. If you decide to stop or withdraw your consent, all the information gathered up until then will be permanently deleted.</p>

                        <p>If your data are used in scientific publications or made public in any other way, they will be fully anonymised. Your personal information may not be viewed by third parties.</p>

                        <p>If you need any further information on the research, now or in the future, you can contact Maria Aloni (m.d.aloni@uva.nl) or Tomasz Klochowicz (email: t.j.klochowicz@uva.nl; Universiteit van Amsterdam p.o. box 94242 1090 GE Amsterdam)</p>
                        <p>If you have any complaints regarding this research, you can contact the secretary of the Ethics Committee of the Faculty of Humanities of the University of Amsterdam; email: commissie-ethiek-fgw@uva.nl; phone number: +31 20 525 3054; Binnengasthuisstraat 9, 1012 ZA Amsterdam.</p>
                        <p>By clicking the button 'Accept and continue' below you consent to:</p>
                        <ul>
                            <li>Participate in this research </li>
                            <li>Storage and processing of the anonymized data. </li>
                        </ul>
                    </div>
                </div>
            `,
            choices: ['Decline and exit', '<b> Accept and continue</b>'],
            button_html: '<button class="jspsych-btn" style="font-size:120%;margin-bottom:40px;">%choice%</button>',
            on_finish: function(data){
            // Cheeck if consent the response as correct or incorrect.
            if(data.response == 1){
            data.correct = true;
            } else {
            data.correct = false; 
            }
        }
            };
            var if_consent_trial = {
        type: jsPsychHtmlKeyboardResponse,
        stimulus: "<b>We cannot collect data from you without your consent. </b> </p> <p><a href='https://app.prolific.co/'>Click here to return to Prolific.</a></p>",
        on_finish: function(){
            window.location = 'https://app.prolific.co/'
        },
    trial_duration: 5000,
    post_trial_gap: 1000,
    };

    var if_consent_node = {
        timeline: [if_consent_trial],
        conditional_function: function(){
            var last_trial_correct = jsPsych.data.get().last(1).values()[0].correct;
            if(last_trial_correct){
                return false;
            } else {
                return true;
            }
        }
    };
        // Push the welcome trial to the timeline
        // timeline.push(consent, if_consent_node);
    
    // Loop until the consent is given. To avoid 'go back' bug: previously it was possible to go back after being redirected and skip that question.
    var loop_node = {
    timeline: [consent, if_consent_node],
    loop_function: function(data){
        // check if the answer is correct: if it is return false not to repeat again, and if not repeat
        if(data.values()[0].correct){
            return false;
        } else {
            return true;
        }
    }
    };

timeline.push(loop_node);

    var native = {
        type: jsPsychSurveyMultiChoice,
        questions: [
            {
            prompt: "Are you a native speaker of English?", 
            options: ['I am a native speaker of English.', 'I am not a native speaker of English.'],
            required: true
            }   
        ],
        on_finish: function(data){
        // Score the response as correct or incorrect.
        if(data.response.Q0 == 'I am a native speaker of English.'){
        data.correct = true;
        } else {
        data.correct = false; 
        }
    },
    // Create a conditional trial, which displays error message when the question about the first languege is answered incorrectly and redirects back to prolific.
    };
    var if_trial = {
        type: jsPsychHtmlKeyboardResponse,
        stimulus: "<b>Only native speakers of English can participate in this study! </b> </p> <p><a href='https://app.prolific.co/'>Click here to return to Prolific.</a></p>",
        on_finish: function(){
            window.location = 'https://app.prolific.co/'
        },
    trial_duration: 5000,
    post_trial_gap: 1000,
};

var if_node = {
    timeline: [if_trial],
    conditional_function: function(){
        var last_trial_correct = jsPsych.data.get().last(1).values()[0].correct;
        if(last_trial_correct){
            return false;
        } else {
            return true;
        }
    }
};
// Push the question about the native language and redirect if wrong answer
var loop_node = {
    timeline: [native, if_node],
    loop_function: function(data){
        // check if the answer is correct: if it is reyurn false not to repeat again, and if not repeat
        if(data.values()[0].correct){
            return false;
        } else {
            return true;
        }
    }
    };

timeline.push(loop_node);

// Create feedback trial, which will appear once a training item is answered
var feedback = {
  type: jsPsychHtmlKeyboardResponse,
  trial_duration: 
  function(){
    // Check if the answer was correct
    var last_trial_correct = jsPsych.data.get().last(1).values()[0].correct;
    if(last_trial_correct){
      return 500; // If correct wait .5 sec
    } else {
      return 4000; // If incorrect wait 4 sec
    }
 },
  stimulus: function(){
    // Check if the answer was correct
    var last_trial_correct = jsPsych.data.get().last(1).values()[0].correct;
    if(last_trial_correct){
      return "<p style='font-size:200%;'><b>Correct!</b></p>"; // If correct
    } else {
      return "<p style='font-size:200%;'> <b> Incorrect! </b></p> <p style='font-size:200%;'> Wait 4 seconds and try again!</p>"; // If incorrect.
    }
  },
  choices: ['NO_KEYS'],
}




// Create the trial that will appear if participants answer "indeterminate"
var indeterminate_trial = {
        type: jsPsychSurveyMultiChoice,
        questions: [{
    prompt: 'You answered "indeterminate" to the last question. Please tell us what you had in mind:',
    options: ["I strongly feel that there is no right answer.", "I just don't know; I am not sure what the answer is."],
    horizontal: false,
    required: true,
    }]};
// Only show the indeterminate trial if the answer is "indeterminate"
var indeterminate_node = {
    timeline: [indeterminate_trial],
    conditional_function: function(){
        var last_trial_indet = jsPsych.data.get().last(1).values()[0].indet
        if(last_trial_indet){
            return true;
        } else {
            return false;
        }
    }
};


/////////////////////////////////////////////////////
// SWITCHES
/////////////////////////////////////////////////////

//Instructions for switches
var switches_inst = {
            type: jsPsychHtmlButtonResponse,
            stimulus:` <div >
                    <p style="text-align:center;">There are two switches, A and B, connected to a light. Part of the circuit is
                        shaded grey. Each switch has three possible positions: up, in the middle, or
                        down. </p> 
                    <p> As the wiring indicates, the light is on just in case switch A is in the
                        middle and switch B is either up or in the middle.</p> 
                        
                    <p>Currently, switch A is in the middle and switch B is down, so the light is off.</p>
                    <img src='img/md_l.png' style='width:90%;max-width:1000px;height:auto;margin-bottom:4%;'></img>

                    <p> In each trial of this part of the study you will be presented with the same electrical circuit, but the position of the switches may differ. </p>
                    <p> You will be asked to evaluate whether a sentence describing the picture is true. </p>
                    </div>
                    ` ,
            choices: ['OK'],
            button_html: '<button class="jspsych-btn" style="font-size:120%;margin-bottom:40px;">%choice%</button>',
            post_trial_gap: 400
            };
var switches_inst_2 = {
type: jsPsychHtmlButtonResponse,
stimulus:` 
        <p>Sometimes the light will be covered with a question mark. It means that you need to figure out if the light is on or off.</p>
        <img src='img/md_q.png' style='width:90%;max-width:1000px;height:auto;margin-bottom:4%;'></img>

        <p> Consider the following sentence: </p>
         <p style='margin-bottom:4%;font-size:110%;'> <b>The light is off. </b></p>
        <p> In this case you would evaluate is as true, since the swiches do not complete the wiring and the current cannot flow.</p>

        ` ,
choices: ['OK'],
button_html: '<button class="jspsych-btn" style="font-size:120%;margin-bottom:40px;">%choice%</button>',
post_trial_gap: 400
};


// Loop the training and feedback until the correct answer is given.

var switches_train = {
    type: jsPsychHtmlButtonResponse,
    stimulus:jsPsych.timelineVariable('stimulus'),
    choices: ['True', 'Indeterminate','False'],
    button_html: '<button class="jspsych-btn mob-btn" style="font-size:120%;"">%choice%</button>',
    data: {
        scenario: 'switches',
        question_type: jsPsych.timelineVariable('question_type'),
        // response_type: jsPsych.timelineVariable('response_type'),
        // items: jsPsych.timelineVariable('items')
    },
    on_finish: function(data){
        // Score the response as correct or incorrect.
        if(data.response == jsPsych.timelineVariable('cor_ans')){
        data.correct = true;
        } 
        else {
        data.correct = false; 
        }
    }};


var switches_train_stimuli = [

{ stimulus:` 
 <img src='img/mu_q.png' style='width:90%;max-width:1000px;height:auto;margin-bottom:4%;'></img>
 
 <p style='margin-bottom:4%;font-size:110%;'> <b>The light is off. </b></p>

` , 
question_type: 'training', 
cor_ans: 2, 
switches_pos: 'mu',
sentence_light: 'off',
},

{ stimulus:` 
 <img src='img/dm_q.png' style='width:90%;max-width:1000px;height:auto;margin-bottom:4%;'></img>
 
 <p style='margin-bottom:4%;font-size:110%;'> <b>The light is on. </b></p>

` , 
question_type: 'training', 
cor_ans: 2, 
switches_pos: 'dm',
sentence_light: 'on',
},

{ stimulus:` 
 <img src='img/mm_q.png' style='width:90%;max-width:1000px;height:auto;margin-bottom:4%;'></img>
 
 <p style='margin-bottom:4%;font-size:110%;'> <b>The light is on. </b></p>

` , 
question_type: 'training', 
cor_ans: 0, 
switches_pos: 'mm',
sentence_light: 'on',
},

{ stimulus:` 
 <img src='img/ud_q.png' style='width:90%;max-width:1000px;height:auto;margin-bottom:4%;'></img>
 
 <p style='margin-bottom:4%;font-size:110%;'> <b>The light is off. </b></p>

` , 
question_type: 'training', 
cor_ans: 0, 
switches_pos: 'ud',
sentence_light: 'off',
},
]

var switches_train_loop = {
    timeline: [switches_train, feedback],
    timeline_variables: switches_train_stimuli,
    randomize_order: true,
    loop_function: function(data){
        // check if the answer is correct: if it is return false not to repeat again, and if not repeat
        if(data.values()[0].correct){
            return false;
        } else {
            return true;
        }
    }
};



// Set up switches trial but substitute the value of the parameter in from the timeline variables.
var switches_test = {
    type: jsPsychHtmlButtonResponse,
    post_trial_gap: 400,
    stimulus:jsPsych.timelineVariable('stimulus'),
    choices: ['True', 'Indeterminate','False'],
    button_html: '<button class="jspsych-btn mob-btn" style="font-size:120%;"">%choice%</button>',
    data: {
        scenario: 'switches',
        question_type: jsPsych.timelineVariable('question_type'),
        // response_type: jsPsych.timelineVariable('response_type'),
        // items: jsPsych.timelineVariable('items')
    },
    on_finish: function(data){
        // Score the response as correct or incorrect.
        if(data.response == 1){
        data.indet = true;
        } else {
        data.indet = false; 
        }
    }, 
    };

var switches_test_stimuli = [

{ stimulus:` 
 <img src='img/md_l.png' style='width:90%;max-width:1000px;height:auto;margin-bottom:4%;'></img>
 
 <p style='margin-bottom:4%;font-size:110%;'> <b>If both switches were outside the shaded area, the light would be on. </b></p>

` , 
question_type: 'test', 
condition: 'False',
predicted_ans: 2,
switches_pos: 'md',
sentence: 'If both switches were outside the shaded area, the light would be on.',

},
{ stimulus:` 
 <img src='img/md_l.png' style='width:90%;max-width:1000px;height:auto;margin-bottom:4%;'></img>
 
 <p style='margin-bottom:4%;font-size:110%;'> <b>If both switches were in the middle, the light would be on. </b></p>

` , 
question_type: 'test', 
condition: 'True',
predicted_ans: 0,
switches_pos: 'md',
sentence: 'If both switches were in the middle, the light would be on.',

},
{ stimulus:` 
 <img src='img/md_l.png' style='width:90%;max-width:1000px;height:auto;margin-bottom:4%;'></img>
 
 <p style='margin-bottom:4%;font-size:110%;'> <b>If switch B were in the shaded area, the light would be on. </b></p>

` , 
question_type: 'test', 
condition: 'T1',
predicted_ans: 0,
switches_pos: 'md',
sentence: 'If switch B were in the shaded area, the light would be on.',

},
{ stimulus:` 
 <img src='img/md_l.png' style='width:90%;max-width:1000px;height:auto;margin-bottom:4%;'></img>
 
 <p style='margin-bottom:4%;font-size:110%;'> <b>If switch B were in the shaded area, both switches would be in the shaded area. </b></p>

` , 
question_type: 'test', 
condition: 'T2',
predicted_ans: 0,
switches_pos: 'md',
sentence: 'If switch B were in the shaded area, both switches would be in the shaded area.',

},
{ stimulus:` 
 <img src='img/md_l.png' style='width:90%;max-width:1000px;height:auto;margin-bottom:4%;'></img>
 
 <p style='margin-bottom:4%;font-size:110%;'> <b>If both switches were in the shaded area, switch B would be in the shaded area. </b></p>

` , 
question_type: 'test', 
condition: 'T3',
predicted_ans: 0,
switches_pos: 'md',
sentence: 'If both switches were in the shaded area, switch B would be in the shaded area.',

},
{ stimulus:` 
 <img src='img/md_l.png' style='width:90%;max-width:1000px;height:auto;margin-bottom:4%;'></img>
 
 <p style='margin-bottom:4%;font-size:110%;'> <b>If both switches were in the shaded area, the light would be on. </b></p>

` , 
question_type: 'test', 
condition: 'T4',
predicted_ans: 3,
switches_pos: 'md',
sentence: 'If both switches were in the shaded area, the light would be on.',

},
{ stimulus:` 
 <img src='img/md_l.png' style='width:90%;max-width:1000px;height:auto;margin-bottom:4%;'></img>
 
 <p style='margin-bottom:4%;font-size:110%;'> <b>The light is on just in case switch A is in the middle and switch B is up or in the middle. </b></p>

` , 
question_type: 'filler', 
condition: 'F1',
predicted_ans: 0,
switches_pos: 'md',
sentence: 'The light is on just in case switch A is in the middle and switch B is up or in the middle.',

},
{ stimulus:` 
 <img src='img/md_l.png' style='width:90%;max-width:1000px;height:auto;margin-bottom:4%;'></img>
 <p style='margin-bottom:4%;font-size:110%;'> <b>The light is currently on. </b></p>

` , 
question_type: 'filler', 
condition: 'F2',
predicted_ans: 2,
switches_pos: 'md',
sentence: 'The light is currently on.',

},
{ stimulus:` 
 <img src='img/md_l.png' style='width:90%;max-width:1000px;height:auto;margin-bottom:4%;'></img>
 
 <p style='margin-bottom:4%;font-size:110%;'> <b>Switch B is currently in the shaded area. </b></p>

` , 
question_type: 'filler', 
condition: 'F3',
predicted_ans: 2,
switches_pos: 'md',
sentence: 'Switch B is currently in the shaded area.',

},
{ stimulus:` 
 <img src='img/md_l.png' style='width:90%;max-width:1000px;height:auto;margin-bottom:4%;'></img>
 
 <p style='margin-bottom:4%;font-size:110%;'> <b>Switch B is currently in the middle. </b></p>

` , 
question_type: 'filler', 
condition: 'F4',
predicted_ans: 2,
switches_pos: 'md',
sentence: 'Switch B is currently in the middle.',

},
{ stimulus:` 
 <img src='img/md_l.png' style='width:90%;max-width:1000px;height:auto;margin-bottom:4%;'></img>
 
 <p style='margin-bottom:4%;font-size:110%;'> <b>A switch is in the shaded area just in case it is up or in the middle. </b></p>

` , 
question_type: 'filler', 
condition: 'F5',
predicted_ans: 0,
switches_pos: 'md',
sentence: 'A switch is in the shaded area just in case it is up or in the middle.',

},
];


// 
var switches_test_procedure = {
    // Display fixation cross and then a test stimuli
    timeline: [switches_test, indeterminate_node],
    // link the variables from the stimuli array with the test trial boilerplate
    timeline_variables: switches_test_stimuli,
    randomize_order: true,
    };


///////////////////////////////////////////////////////////////////////////////////////////////
// CANDY
//////////////////////////////////////////////////////////////////////////////////////////////

//Instructions for candy
var candy_inst = {
            type: jsPsychHtmlButtonResponse,
            stimulus:` <div >
                    <p style="margin-top:5%;">A school teacher has a bag containing many kinds of candy.</p>  
                        
                    <p> Some candies in the bag are fruit-flavoured, including strawberry-flavoured candy, banana-flavoured candy, and cherry-flavoured candy. 
                        The bag also contains candy that is not fruit-flavoured, such as chocolate, toffee, and mints. Alice and Bob are two kids in the teacher's class.</p> 
                    <p>  Alice likes strawberry flavoured candy and does not like any other kind of candy. Bob likes
                                    all fruit flavoured candy, but does not like any other kind of candy. </p> 
                        
                    <p>At the end of the school day, the teacher gave a piece of candy to each child by picking one at random from the bag.</p>
                    <img src='img/c_a_s_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img><br>
                    <img src='img/c_b_b_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>

                    <p> In each trial of this part of the study you will be presented with a picture indicating which child got which candy. </p>
                    <p> You will be asked to evaluate whether a sentence describing the picture is true. </p>
                    </div>
                    ` ,
            choices: ['OK'],
            button_html: '<button class="jspsych-btn" style="font-size:120%;margin-bottom:40px;">%choice%</button>',
            post_trial_gap: 400
            };
var candy_inst_2 = {
type: jsPsychHtmlButtonResponse,
stimulus:` 
        <p style="margin-top:5%;"> Sometimes the children's preferences will be covered with question marks. It means that you need to figure out whether the child was happy their candy. </p>
        <img src='img/c_a_s_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img><br>
        <img src='img/c_b_b_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>

        <p> Consider the following sentence: </p>
         <p style='margin-bottom:4%;font-size:110%;'> <b>Both children are happy with their candy.  </b></p>
        <p> In this case you would evaluate this sentence as true, since Alice got strawberry-flavoured candy and Bob a fruit flavoured candy.</p>

        ` ,
choices: ['OK'],
button_html: '<button class="jspsych-btn" style="font-size:120%;margin-bottom:40px;">%choice%</button>',
post_trial_gap: 400
};


// Loop the training and feedback until the correct answer is given.

var candy_train = {
    type: jsPsychHtmlButtonResponse,
    stimulus:jsPsych.timelineVariable('stimulus'),
    choices: ['True', 'Indeterminate','False'],
    button_html: '<button class="jspsych-btn mob-btn" style="font-size:120%;"">%choice%</button>',
    data: {
        scenario: 'candy',
        question_type: jsPsych.timelineVariable('question_type'),
        // response_type: jsPsych.timelineVariable('response_type'),
        // items: jsPsych.timelineVariable('items')
    },
    on_finish: function(data){
        // Score the response as correct or incorrect.
        if(data.response == jsPsych.timelineVariable('cor_ans')){
        data.correct = true;
        } 
        else {
        data.correct = false; 
        }
    }};


var candy_train_stimuli = [

{ stimulus:` 
    <p>  Alice likes strawberry flavoured candy and does not like any other kind of candy. Bob likes all fruit flavoured candy, but does not like any other kind of candy. </p> 
                        
    <img src='img/c_a_s_q.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img><br>
    <img src='img/c_b_b_q.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b>Both children are unhappy with their candy.  </b></p>

` , 
question_type: 'training', 
cor_ans: 2, 
candy_pos: 'sb',
sentence_light: 'unhappy',
},

{ stimulus:` 
    <p>  Alice likes strawberry flavoured candy and does not like any other kind of candy. Bob likes all fruit flavoured candy, but does not like any other kind of candy. </p>                 
    <img src='img/c_a_b_q.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img><br>
    <img src='img/c_b_s_q.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b>Both children are happy with their candy.  </b></p>

` , 
question_type: 'training', 
cor_ans: 2, 
candy_pos: 'bs',
sentence_light: 'happy',
},

{ stimulus:` 
    <p>  Alice likes strawberry flavoured candy and does not like any other kind of candy. Bob likes all fruit flavoured candy, but does not like any other kind of candy. </p> 
                        
    <img src='img/c_a_s_q.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img><br>
    <img src='img/c_b_s_q.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b>Both children are happy with their candy.  </b></p>
` , 
question_type: 'training', 
cor_ans: 0, 
candy_pos: 'ss',
sentence_light: 'happy',
},

{ stimulus:` 
    <p>  Alice likes strawberry flavoured candy and does not like any other kind of candy. Bob likes all fruit flavoured candy, but does not like any other kind of candy. </p> 
                        
    <img src='img/c_a_b_q.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img><br>
    <img src='img/c_b_ch_q.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b>Both children are unhappy with their candy.  </b></p>
` , 
question_type: 'training', 
cor_ans: 0, 
candy_pos: 'bc',
sentence_light: 'unhappy',
},
]

var candy_train_loop = {
    timeline: [candy_train, feedback],
    timeline_variables: candy_train_stimuli,
    randomize_order: true,
    loop_function: function(data){
        // check if the answer is correct: if it is return false not to repeat again, and if not repeat
        if(data.values()[0].correct){
            return false;
        } else {
            return true;
        }
    }
};

// Set up candy trial but substitute the value of the parameter in from the timeline variables.
var candy_test = {
    type: jsPsychHtmlButtonResponse,
    post_trial_gap: 400,
    stimulus:jsPsych.timelineVariable('stimulus'),
    choices: ['True', 'Indeterminate','False'],
    button_html: '<button class="jspsych-btn mob-btn" style="font-size:120%;"">%choice%</button>',
    data: {
        scenario: 'candy',
        question_type: jsPsych.timelineVariable('question_type'),
        // response_type: jsPsych.timelineVariable('response_type'),
        // items: jsPsych.timelineVariable('items')
    },
    on_finish: function(data){
        // Score the response as correct or incorrect.
        if(data.response == 1){
        data.indet = true;
        } else {
        data.indet = false; 
        }
    }, 
    };

var candy_test_stimuli = [

{ stimulus:` 
    <p>  Alice likes strawberry flavoured candy and does not like any other kind of candy. Bob likes all fruit flavoured candy, but does not like any other kind of candy. </p>             
    <img src='img/c_a_s_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img><br>
    <img src='img/c_b_m_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b>If both children had fruit-flavoured candy, they would both be happy with their candy. </b></p>
` , 
question_type: 'test', 
condition: 'False',
predicted_ans: 2,
candy_pos: 'sm',
sentence: 'If both children had fruit-flavoured candy, they would both be happy with their candy.',

},
{ stimulus:` 
    <p>  Alice likes strawberry flavoured candy and does not like any other kind of candy. Bob likes all fruit flavoured candy, but does not like any other kind of candy. </p>             
    <img src='img/c_a_s_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img><br>
    <img src='img/c_b_m_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b>If both children had strawberry-flavoured candy, they would both be happy with their candy. </b></p>
` , 
question_type: 'test', 
condition: 'True',
predicted_ans: 0,
candy_pos: 'sm',
sentence: 'If both children had strawberry-flavoured candy, they would both be happy with their candy'
},
{ stimulus:` 
    <p>  Alice likes strawberry flavoured candy and does not like any other kind of candy. Bob likes all fruit flavoured candy, but does not like any other kind of candy. </p>             
    <img src='img/c_a_s_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img><br>
    <img src='img/c_b_m_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b>If Bob’s candy were fruit-flavoured, both children would be happy with their candy. </b></p>
` , 
question_type: 'test', 
condition: 'T1',
predicted_ans: 0,
candy_pos: 'sm',
sentence: 'If Bob’s candy were fruit-flavoured, both children would be happy with their candy.',

},
{ stimulus:` 
    <p>  Alice likes strawberry flavoured candy and does not like any other kind of candy. Bob likes all fruit flavoured candy, but does not like any other kind of candy. </p>             
    <img src='img/c_a_s_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img><br>
    <img src='img/c_b_m_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b>If Bob’s candy were fruit-flavoured, both children’s candy would be fruit-flavoured.</b></p>
` , 
question_type: 'test', 
condition: 'T2',
predicted_ans: 0,
candy_pos: 'sm',
sentence: 'If Bob’s candy were fruit-flavoured, both children’s candy would be fruit-flavoured.',

},
{ stimulus:` 
    <p>  Alice likes strawberry flavoured candy and does not like any other kind of candy. Bob likes all fruit flavoured candy, but does not like any other kind of candy. </p>             
    <img src='img/c_a_s_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img><br>
    <img src='img/c_b_m_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b>If both children’s candy were fruit-flavoured, Bob’s candy would be fruit-flavoured. </b></p>
` , 
question_type: 'test', 
condition: 'T3',
predicted_ans: 0,
candy_pos: 'sm',
sentence: 'If both children’s candy were fruit-flavoured, Bob’s candy would be fruit-flavoured.',

},
{ stimulus:` 
    <p>  Alice likes strawberry flavoured candy and does not like any other kind of candy. Bob likes all fruit flavoured candy, but does not like any other kind of candy. </p>             
    <img src='img/c_a_s_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img><br>
    <img src='img/c_b_m_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b>If both children’s candy were fruit-flavoured, both children would be happy with their candy.</b></p>
` , 
question_type: 'test', 
condition: 'T4',
predicted_ans: 3,
candy_pos: 'sm',
sentence: 'If both children’s candy were fruit-flavoured, both children would be happy with their candy.',

},
{ stimulus:` 
    <p>  Alice likes strawberry flavoured candy and does not like any other kind of candy. Bob likes all fruit flavoured candy, but does not like any other kind of candy. </p>             
    <img src='img/c_a_s_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img><br>
    <img src='img/c_b_m_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b>Both Alice and Bob are happy just in case Alice gets a strawberry-flavoured candy and Bob gets a fruit-flavoured candy. </b></p>
` , 
question_type: 'filler', 
condition: 'F1',
predicted_ans: 0,
candy_pos: 'sm',
sentence: 'Both Alice and Bob are happy just in case Alice gets a strawberry-flavoured candy and Bob gets a fruit-flavoured candy.',

},
{ stimulus:` 
    <p>  Alice likes strawberry flavoured candy and does not like any other kind of candy. Bob likes all fruit flavoured candy, but does not like any other kind of candy. </p>             
    <img src='img/c_a_s_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img><br>
    <img src='img/c_b_m_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b>Both children were happy with the candy they received. </b></p>
` , 
question_type: 'filler', 
condition: 'F2',
predicted_ans: 2,
candy_pos: 'sm',
sentence: 'Both children were happy with the candy they received.',

},

{ stimulus:` 
    <p>  Alice likes strawberry flavoured candy and does not like any other kind of candy. Bob likes all fruit flavoured candy, but does not like any other kind of candy. </p>             
    <img src='img/c_a_s_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img><br>
    <img src='img/c_b_m_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b>Bob currently has a fruit-flavoured candy..</b></p>
` , 
question_type: 'filler', 
condition: 'F3',
predicted_ans: 2,
candy_pos: 'sm',
sentence: 'Bob currently has a fruit-flavoured candy.',

},
{ stimulus:` 
    <p>  Alice likes strawberry flavoured candy and does not like any other kind of candy. Bob likes all fruit flavoured candy, but does not like any other kind of candy. </p>             
    <img src='img/c_a_s_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img><br>
    <img src='img/c_b_m_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b>Bob currently has a strawberry-flavoured candy. </b></p>
` , 
question_type: 'filler', 
condition: 'F4',
predicted_ans: 2,
candy_pos: 'sm',
sentence: 'Bob currently has a strawberry-flavoured candy.',

},
{ stimulus:` 
    <p>  Alice likes strawberry flavoured candy and does not like any other kind of candy. Bob likes all fruit flavoured candy, but does not like any other kind of candy. </p>             
    <img src='img/c_a_s_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img><br>
    <img src='img/c_b_m_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b>The teacher’s bag contains banana-flavoured candy. </b></p>
` , 
question_type: 'filler', 
condition: 'F5',
predicted_ans: 0,
candy_pos: 'sm',
sentence: 'The teacher’s bag contains banana-flavoured candy.',

},
{ stimulus:` 
    <p>  Alice likes strawberry flavoured candy and does not like any other kind of candy. Bob likes all fruit flavoured candy, but does not like any other kind of candy. </p>             
    <img src='img/c_a_s_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img><br>
    <img src='img/c_b_m_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b>Both children currently have fruit-flavoured candy.</b></p>
` , 
question_type: 'filler', 
condition: 'F6',
predicted_ans: 2,
candy_pos: 'sm',
sentence: 'Both children currently have fruit-flavoured candy.',

},
];


// 
var candy_test_procedure = {
    // Display fixation cross and then a test stimuli
    timeline: [candy_test, indeterminate_node],
    // link the variables from the stimuli array with the test trial boilerplate
    timeline_variables: candy_test_stimuli,
    randomize_order: true,
    };

///////////////////////////////////////////////////
//NUMBERS
///////////////////////////////////////////////////

//Instructions for candy
var numbers_inst = {
            type: jsPsychHtmlButtonResponse,
            stimulus:` <div >
                    <p style="margin-top:5%;">Alex and Kim are playing a computer game. </p>  
                        
                    <p> In the game a computer gives each player two numbers: a blue number and a red number. Each number is between
                        1 and 4 and is chosen by the computer at random.</p> 
                    <p>   A player wins just in case
                                their red number is higher than their opponentʼs red number and their blue
                                number is higher than their opponentʼs blue number.  </p> 
                        
                    <p>Otherwise the result is a draw.</p>
                    <img src='img/n_t1_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img><br>

                    <p> In each trial of this part of the study you will be presented with a picture showing a score of the game. </p>
                    <p> You will be asked to evaluate whether a sentence describing the picture is true. </p>
                    </div>
                    ` ,
            choices: ['OK'],
            button_html: '<button class="jspsych-btn" style="font-size:120%;margin-bottom:40px;">%choice%</button>',
            post_trial_gap: 400
            };
var numbers_inst_2 = {
type: jsPsychHtmlButtonResponse,
stimulus:` 
        <p style="margin-top:5%;"> Sometimes the result of the game will be covered with question marks. It means that you need to figure out who has the winning hand. </p>
        <img src='img/n_t1_q.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img><br>

        <p> Consider the following sentence: </p>
         <p style='margin-bottom:4%;font-size:110%;'> <b>Kim has a winning hand </b></p>
        <p> In this case you would evaluate this sentence as true, since both Kim's cards are higher than Alex's cards.</p>

        ` ,
choices: ['OK'],
button_html: '<button class="jspsych-btn" style="font-size:120%;margin-bottom:40px;">%choice%</button>',
post_trial_gap: 400
};

// Loop the training and feedback until the correct answer is given.

var numbers_train = {
    type: jsPsychHtmlButtonResponse,
    stimulus:jsPsych.timelineVariable('stimulus'),
    choices: ['True', 'Indeterminate','False'],
    button_html: '<button class="jspsych-btn mob-btn" style="font-size:120%;"">%choice%</button>',
    data: {
        scenario: 'numbers',
        question_type: jsPsych.timelineVariable('question_type'),
        // response_type: jsPsych.timelineVariable('response_type'),
        // items: jsPsych.timelineVariable('items')
    },
    on_finish: function(data){
        // Score the response as correct or incorrect.
        if(data.response == jsPsych.timelineVariable('cor_ans')){
        data.correct = true;
        } 
        else {
        data.correct = false; 
        }
    }};


var numbers_train_stimuli = [

{ stimulus:` 
    <p>   A player wins just in case their red number is higher than their opponentʼs red number and their blue number is higher than their opponentʼs blue number.  </p>                 
    <p>Otherwise the result is a draw.</p>
                        
    <img src='img/n_t1_q.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b> Kim has a wining hand.  </b></p>

` , 
question_type: 'training', 
cor_ans: 0, 
numbers_pos: '1223',
sentence_light: 'win',
},

{ stimulus:` 
    <p>   A player wins just in case their red number is higher than their opponentʼs red number and their blue number is higher than their opponentʼs blue number.  </p>           
    <p>Otherwise the result is a draw.</p>                  
    <img src='img/n_t2_q.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b> Kim does not have a wining hand.  </b></p>

` , 
question_type: 'training', 
cor_ans: 2, 
numbers_pos: '2233',
sentence_light: 'not win',
},

{ stimulus:` 
    <p>   A player wins just in case their red number is higher than their opponentʼs red number and their blue number is higher than their opponentʼs blue number.  </p>           
    <p>Otherwise the result is a draw.</p>                  
    <img src='img/n_t3_q.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b> Kim has a wining hand.  </b></p>
` , 
question_type: 'training', 
cor_ans: 2, 
numbers_pos: '1242',
sentence_light: 'win',
},

{ stimulus:` 
    <p>   A player wins just in case their red number is higher than their opponentʼs red number and their blue number is higher than their opponentʼs blue number.  </p>           
    <p>Otherwise the result is a draw.</p>                  
    <img src='img/n_t4_q.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b> Kim does not have a wining hand.  </b></p>
` , 
question_type: 'training', 
cor_ans: 0, 
numbers_pos: '4231',
sentence_light: 'not win',
},
]

var numbers_train_loop = {
    timeline: [numbers_train, feedback],
    timeline_variables: numbers_train_stimuli,
    randomize_order: true,
    loop_function: function(data){
        // check if the answer is correct: if it is return false not to repeat again, and if not repeat
        if(data.values()[0].correct){
            return false;
        } else {
            return true;
        }
    }
};

// Set up numbers trial but substitute the value of the parameter in from the timeline variables.
var numbers_test = {
    type: jsPsychHtmlButtonResponse,
    post_trial_gap: 400,
    stimulus:jsPsych.timelineVariable('stimulus'),
    choices: ['True', 'Indeterminate','False'],
    button_html: '<button class="jspsych-btn mob-btn" style="font-size:120%;"">%choice%</button>',
    data: {
        scenario: 'numbers',
        question_type: jsPsych.timelineVariable('question_type'),
        // response_type: jsPsych.timelineVariable('response_type'),
        // items: jsPsych.timelineVariable('items')
    },
    on_finish: function(data){
        // Score the response as correct or incorrect.
        if(data.response == 1){
        data.indet = true;
        } else {
        data.indet = false; 
        }
    }, 
    };

var numbers_test_stimuli = [

{ stimulus:` 
    <p>   A player wins just in case their red number is higher than their opponentʼs red number and their blue number is higher than their opponentʼs blue number.  </p>           
    <p>Otherwise the result is a draw.</p>                  
    <img src='img/n_test_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b> If both of Kimʼs numbers were 2, Kim would have a winning hand.  </b></p>
` , 
question_type: 'test', 
condition: 'False',
predicted_ans: 2,
numbers_pos: '1314',
sentence: 'If both of Kimʼs numbers were 2, Kim would have a winning hand.',

},
{ stimulus:` 
    <p>   A player wins just in case their red number is higher than their opponentʼs red number and their blue number is higher than their opponentʼs blue number.  </p>           
    <p>Otherwise the result is a draw.</p>                  
    <img src='img/n_test_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b> If both of Kimʼs numbers were 4, Kim would have a winning hand.  </b></p>
` , 
question_type: 'test', 
condition: 'True',
predicted_ans: 0,
numbers_pos: '1314',
sentence: 'If both of Kimʼs numbers were 4, Kim would have a winning hand.',

},
{ stimulus:` 
    <p>   A player wins just in case their red number is higher than their opponentʼs red number and their blue number is higher than their opponentʼs blue number.  </p>           
    <p>Otherwise the result is a draw.</p>                  
    <img src='img/n_test_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b> If Kimʼs blue number were even, Kim would have a winning hand. </b></p>
` , 
question_type: 'test', 
condition: 'T1',
predicted_ans: 0,
numbers_pos: '1314',
sentence: 'If Kimʼs blue number were even, Kim would have a winning hand.',

},
{ stimulus:` 
    <p>   A player wins just in case their red number is higher than their opponentʼs red number and their blue number is higher than their opponentʼs blue number.  </p>           
    <p>Otherwise the result is a draw.</p>                  
    <img src='img/n_test_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b> If Kimʼs blue number was even, both of Kimʼs numbers would be even. </b></p>
` , 
question_type: 'test', 
condition: 'T2',
predicted_ans: 0,
numbers_pos: '1314',
sentence: 'If Kimʼs blue number was even, both of Kimʼs numbers would be even.',

},
{ stimulus:` 
    <p>   A player wins just in case their red number is higher than their opponentʼs red number and their blue number is higher than their opponentʼs blue number.  </p>           
    <p>Otherwise the result is a draw.</p>                  
    <img src='img/n_test_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b> If both of Kimʼs numbers were even, Kimʼs blue number would be even. </b></p>
` , 
question_type: 'test', 
condition: 'T3',
predicted_ans: 0,
numbers_pos: '1314',
sentence: 'If both of Kimʼs numbers were even, Kimʼs blue number would be even.',

},
{ stimulus:` 
    <p>   A player wins just in case their red number is higher than their opponentʼs red number and their blue number is higher than their opponentʼs blue number.  </p>           
    <p>Otherwise the result is a draw.</p>                  
    <img src='img/n_test_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b> If both of Kimʼs numbers were even, Kim would have a winning hand. </b></p>
` , 
question_type: 'test', 
condition: 'T4',
predicted_ans: 3,
numbers_pos: '1314',
sentence: 'If both of Kimʼs numbers were even, Kim would have a winning hand.',

},
{ stimulus:` 
    <p>   A player wins just in case their red number is higher than their opponentʼs red number and their blue number is higher than their opponentʼs blue number.  </p>           
    <p>Otherwise the result is a draw.</p>                  
    <img src='img/n_test_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b> Kimʼs red number is higher than Alexʼs red number. </b></p>
` , 
question_type: 'filler', 
condition: 'F1',
predicted_ans: 0,
numbers_pos: '1314',
sentence: 'Kimʼs red number is higher than Alexʼs red number.',

},
{ stimulus:` 
    <p>   A player wins just in case their red number is higher than their opponentʼs red number and their blue number is higher than their opponentʼs blue number.  </p>           
    <p>Otherwise the result is a draw.</p>                  
    <img src='img/n_test_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b> Alex currently has a winning hand. </b></p>
` , 
question_type: 'filler', 
condition: 'F2',
predicted_ans: 2,
numbers_pos: '1314',
sentence: 'Alex currently has a winning hand.',

},

{ stimulus:` 
    <p>   A player wins just in case their red number is higher than their opponentʼs red number and their blue number is higher than their opponentʼs blue number.  </p>           
    <p>Otherwise the result is a draw.</p>                  
    <img src='img/n_test_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b> Alexʼs red number is even.  </b></p>
` , 
question_type: 'filler', 
condition: 'F3',
predicted_ans: 2,
numbers_pos: '1314',
sentence: 'Alexʼs red number is even.',

},
{ stimulus:` 
     <p>   A player wins just in case their red number is higher than their opponentʼs red number and their blue number is higher than their opponentʼs blue number.  </p>           
    <p>Otherwise the result is a draw.</p>                  
    <img src='img/n_test_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b> Alexʼs blue number is higher than Kimʼs blue number. </b></p>
` , 
question_type: 'filler', 
condition: 'F4',
predicted_ans: 2,
numbers_pos: '1314',
sentence: 'Alexʼs blue number is higher than Kimʼs blue number.',

},
{ stimulus:` 
    <p>   A player wins just in case their red number is higher than their opponentʼs red number and their blue number is higher than their opponentʼs blue number.  </p>           
    <p>Otherwise the result is a draw.</p>                  
    <img src='img/n_test_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b> 2 is an even number. </b></p>
` , 
question_type: 'filler', 
condition: 'F5',
predicted_ans: 0,
numbers_pos: '1314',
sentence: '2 is an even number.',

},
{ stimulus:` 
    <p>   A player wins just in case their red number is higher than their opponentʼs red number and their blue number is higher than their opponentʼs blue number.  </p>           
    <p>Otherwise the result is a draw.</p>                  
    <img src='img/n_test_im.png' style='width:90%;max-width:600px;height:auto;margin-bottom:4%;'></img>
    <p style='margin-bottom:4%;font-size:110%;'> <b> Alexʼs red number is higher than Kimʼs red number. </b></p>
` , 
question_type: 'filler', 
condition: 'F6',
predicted_ans: 2,
numbers_pos: '1314',
sentence: 'Alexʼs red number is higher than Kimʼs red number.',

},
];


// 
var numbers_test_procedure = {
    // Display fixation cross and then a test stimuli
    timeline: [numbers_test, indeterminate_node],
    // link the variables from the stimuli array with the test trial boilerplate
    timeline_variables: numbers_test_stimuli,
    randomize_order: true,
    };




///////////////////////////////////////////////////
//PICTURE SELECTION
///////////////////////////////////////////////////

// Function to highlight the pictures in the picture-choice scenario
    function mark(picture) {
        var image = document.getElementById(picture);

        if(image.style.outlineStyle === "solid") {
            image.style.outline = "none";
            image.style.outlineRadius = "0px";
        } else {
            image.style.outline = "10px solid green";
            image.style.borderRadius = "25px";
        }
    };
    function mark_candy(picture) {
        var image = document.getElementById(picture);

        if(image.style.outlineStyle === "solid") {
            image.style.outline = "1px dashed";
        } else {
            image.style.outline = "10px solid green";
            image.style.borderRadius = "25px";
        }
    };
    // Function to randomise the ordering of images in the answers
    function shuffle(array) {
        let currentIndex = array.length,  randomIndex;

        // While there remain elements to shuffle.
        while (currentIndex != 0) {

            // Pick a remaining element.
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex--;

            // And swap it with the current element.
            [array[currentIndex], array[randomIndex]] = [
            array[randomIndex], array[currentIndex]];
        }
  return array;
}
   
    var switches_pictures = {
    type: jsPsychSurveyMultiSelect,
    preamble: `
        <p> Currently switch A is in the middle and switch B is down:</p>
         <img src='img/cut_md.png' style='width:90%;max-width:220px;height:auto;'></img> 
        <p> What would it look like if both switches were in the shaded area? Please click on all matching pictures. </p>
        <p> When you are done click "Continue" at the bottom of the page.</p>
       `,
    button_html: '<button class="jspsych-btn " style="font-size:120%;margin-bottom:4%;">%choice%</button>',
    questions: [{    
    prompt: "",
    options: shuffle([ 
    "<img src='img/cut_uu.png' class='picture-select' id='picture1' style='width:90%;max-width:220px;height:auto;margin-bottom:10%;padding:7%;'  onclick='mark(`picture1`)'></img>",
    "<img src='img/cut_um.png' class='picture-select' id='picture2' style='width:90%;max-width:220px;height:auto;margin-bottom:10%;padding:7%;'  onclick='mark(`picture2`)'></img>",
    "<img src='img/cut_ud.png' class='picture-select' id='picture3' style='width:90%;max-width:220px;height:auto;margin-bottom:10%;padding:7%;'  onclick='mark(`picture3`)'></img>",
    "<img src='img/cut_mu.png' class='picture-select' id='picture4' style='width:90%;max-width:220px;height:auto;margin-bottom:10%;padding:7%;'  onclick='mark(`picture4`)'></img>",
    "<img src='img/cut_mm.png' class='picture-select' id='picture5' style='width:90%;max-width:220px;height:auto;margin-bottom:10%;padding:7%;'  onclick='mark(`picture5`)'></img>",
    "<img src='img/cut_md.png' class='picture-select' id='picture6' style='width:90%;max-width:220px;height:auto;margin-bottom:10%;padding:7%;'  onclick='mark(`picture6`)'></img>",
        ]),
    horizontal: true
    }]};

    var candy_pictures = {
    type: jsPsychSurveyMultiSelect,
    preamble: `
    <p>  Alice likes strawberry flavoured candy and does not like any other kind of candy. Bob likes all fruit flavoured candy, but does not like any other kind of candy. </p> 
    <p>  Alice got strawberry flavoured candy and Bob got a mint. </p> 
    <img src='img/c_a_s_im.png' style='width:25%;min-width:250px;height:auto;margin-bottom:4%;'></img><br>
    <img src='img/c_b_m_im.png' style='width:25%;min-width:250px;height:auto;margin-bottom:4%;'></img>
        <p> What would it look like if both of the childrenʼs candy had been fruit-flavoured? Please click on all matching pictures. </p>
        <p> When you are done click "Continue" at the bottom of the page.</p>
       `,
    button_html: '<button class="jspsych-btn " style="font-size:120%;margin-bottom:4%;">%choice%</button>',
    questions: [{    
    prompt: "",
    options: shuffle([ 
    "<img src='img/c_bch_cut.png' class='picture-select' id='picture11' style='width:90%;max-width:230px;height:auto;margin-bottom:10%;padding:7%;outline:1px;outline-style:dashed;border-radius:25px;'  onclick='mark_candy(`picture11`)'></img>",
    "<img src='img/c_bs_cut.png' class='picture-select' id='picture12' style='width:90%;max-width:230px;height:auto;margin-bottom:10%;padding:7%;outline:1px;outline-style:dashed;border-radius:25px;'  onclick='mark_candy(`picture12`)'></img>",
    "<img src='img/c_sb_cut.png' class='picture-select' id='picture13' style='width:90%;max-width:230px;height:auto;margin-bottom:10%;padding:7%;outline:1px;outline-style:dashed;border-radius:25px;'  onclick='mark_candy(`picture13`)'></img>",
    "<img src='img/c_ss_cut.png' class='picture-select' id='picture14' style='width:90%;max-width:230px;height:auto;margin-bottom:10%;padding:7%;outline:1px;outline-style:dashed;border-radius:25px;'  onclick='mark_candy(`picture14`)'></img>",
    "<img src='img/c_sm_cut.png' class='picture-select' id='picture15' style='width:90%;max-width:230px;height:auto;margin-bottom:10%;padding:7%;outline:1px;outline-style:dashed;border-radius:25px;'  onclick='mark_candy(`picture15`)'></img>",
    "<img src='img/c_chs_cut.png' class='picture-select' id='picture16' style='width:90%;max-width:230px;height:auto;margin-bottom:10%;padding:7%;outline:1px;outline-style:dashed;border-radius:25px;'  onclick='mark_candy(`picture16`)'></img>",
        ]),
    horizontal: true
    }]};

    var numbers_pictures = {
    type: jsPsychSurveyMultiSelect,
    preamble: `
    <p>   A player wins just in case their red number is higher than their opponentʼs red number and their blue number is higher than their opponentʼs blue number.  </p>           
    <p>Otherwise the result is a draw.</p>                  
    
        <p>  Currently the game looks as follows: </p> 
        <img src='img/n_test_im.png' style='width:90%;max-width:400px;height:auto;margin-bottom:4%;'></img>
        <p> What would it look like if both of Kimʼs numbers were even? Please click on all matching pictures. </p>
        <p> When you are done click "Continue" at the bottom of the page.</p>
       `,
    button_html: '<button class="jspsych-btn " style="font-size:120%;margin-bottom:4%;">%choice%</button>',
    questions: [{    
    prompt: "",
    options: shuffle([ 
    "<img src='img/n_1212_cut.png' class='picture-select' id='picture21' style='width:90%;max-width:230px;height:auto;margin-bottom:10%;padding:7%;outline:1px;outline-style:dashed;border-radius:25px;'  onclick='mark_candy(`picture21`)'></img>",
    "<img src='img/n_1223_cut.png' class='picture-select' id='picture22' style='width:90%;max-width:230px;height:auto;margin-bottom:10%;padding:7%;outline:1px;outline-style:dashed;border-radius:25px;'  onclick='mark_candy(`picture22`)'></img>",
    "<img src='img/n_1242_cut.png' class='picture-select' id='picture23' style='width:90%;max-width:230px;height:auto;margin-bottom:10%;padding:7%;outline:1px;outline-style:dashed;border-radius:25px;'  onclick='mark_candy(`picture23`)'></img>",
    "<img src='img/n_1314_cut.png' class='picture-select' id='picture24' style='width:90%;max-width:230px;height:auto;margin-bottom:10%;padding:7%;outline:1px;outline-style:dashed;border-radius:25px;'  onclick='mark_candy(`picture24`)'></img>",
    "<img src='img/n_2233_cut.png' class='picture-select' id='picture25' style='width:90%;max-width:230px;height:auto;margin-bottom:10%;padding:7%;outline:1px;outline-style:dashed;border-radius:25px;'  onclick='mark_candy(`picture25`)'></img>",
    "<img src='img/n_4231_cut.png' class='picture-select' id='picture26' style='width:90%;max-width:230px;height:auto;margin-bottom:10%;padding:7%;outline:1px;outline-style:dashed;border-radius:25px;'  onclick='mark_candy(`picture26`)'></img>",
        ]),
    horizontal: true
    }]};




// Get a random number between 0 and 5
var group = Math.floor(Math.random() * 5);

// // Switches group
timeline.push(switches_inst, switches_inst_2)
timeline.push(switches_train_loop)
timeline.push(switches_test_procedure);

// // Candy group
timeline.push(candy_inst, candy_inst_2)
timeline.push(candy_train_loop)
timeline.push(candy_test_procedure);

// Numbers group
timeline.push(numbers_inst, numbers_inst_2)
timeline.push(numbers_train_loop)
timeline.push(numbers_test_procedure);

//TO DO:add information about the ordering to every trial.

timeline.push(switches_pictures);
timeline.push(candy_pictures);
timeline.push(numbers_pictures);


var debrief_block = {
    type: jsPsychHtmlKeyboardResponse,
    trial_duration: 2000,
    stimulus: " <p style='font-size:110%;'> Thank you for taking part in the experiment! </p>  <p style='font-size:110%;'>You will be redirected to prolific to confirm your participation and completion.</p>"
    };
timeline.push(debrief_block);


// Run the timeline
jsPsych.run(timeline);
    </script>
</body>
</html>
